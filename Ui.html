<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live TV Channels</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --text:#f8fafc;
  --muted:#94a3b8;
  --accent:#38bdf8;
  --live:#ef4444;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* HEADER */
.header{
  padding:18px 16px;
  text-align:center;
}
.header h1{margin:0;font-size:24px}
.header p{margin:6px 0 0;color:var(--muted)}

/* TABS */
.tabs{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:10px 16px;
}
.tabs::-webkit-scrollbar{display:none}
.tab{
  padding:8px 14px;
  background:var(--card);
  border-radius:999px;
  font-size:13px;
  cursor:pointer;
  white-space:nowrap;
}
.tab.active{
  background:var(--accent);
  color:#000;
  font-weight:700;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
  padding:16px;
}

/* CARD */
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  position:relative;
  cursor:pointer;
  transition:.25s;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 25px rgba(0,0,0,.4);
}
.card:active{transform:scale(.97)}

/* LOGO */
.logo{
  width:100%;
  height:70px;
  border-radius:10px;
  background:linear-gradient(135deg,#020617,#0f172a);
  display:flex;
  align-items:center;
  justify-content:center;
  margin-bottom:10px;
}
.logo img{
  max-width:90%;
  max-height:90%;
  object-fit:contain;
}

/* TITLE */
.title{
  text-align:center;
  font-size:14px;
  font-weight:600;
}

/* LIVE BADGE */
.live-badge{
  position:absolute;
  top:10px;
  left:10px;
  background:var(--live);
  color:#fff;
  font-size:11px;
  font-weight:700;
  padding:4px 8px;
  border-radius:999px;
  display:flex;
  align-items:center;
  gap:5px;
}
.live-dot{
  width:6px;
  height:6px;
  background:#fff;
  border-radius:50%;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <h1>Live TV</h1>
  <p>Watch free & public channels</p>
</div>

<!-- CATEGORY TABS -->
<div class="tabs" id="tabs"></div>

<!-- CHANNEL GRID -->
<div class="grid" id="channels"></div>

<script>
const JSON_URL = '/data/channels.json?_=' + Date.now();

let allChannels = [];
let activeCategory = 'All';

fetch(JSON_URL)
  .then(res => res.json())
  .then(data => {
    allChannels = data.channels || [];
    renderTabs();
    renderChannels();
  });

function renderTabs(){
  const cats = ['All', ...new Set(allChannels.map(c => c.category))];
  const tabs = document.getElementById('tabs');
  tabs.innerHTML = '';
  cats.forEach(cat => {
    const t = document.createElement('div');
    t.className = 'tab' + (cat === activeCategory ? ' active' : '');
    t.innerText = cat;
    t.onclick = () => {
      activeCategory = cat;
      document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      renderChannels();
    };
    tabs.appendChild(t);
  });
}

function renderChannels(){
  const box = document.getElementById('channels');
  box.innerHTML = '';

  allChannels
    .filter(c => activeCategory === 'All' || c.category === activeCategory)
    .forEach(c => {
      const card = document.createElement('div');
      card.className = 'card';
      card.onclick = () => {
        location.href = `player.html?id=${c.id}`;
      };

      card.innerHTML = `
        ${c.live ? `<div class="live-badge"><span class="live-dot"></span>LIVE</div>` : ``}
        <div class="logo">
          ${c.logo ? `<img src="${c.logo}" alt="${c.name}">` : `<span>${c.name[0]}</span>`}
        </div>
        <div class="title">${c.name}</div>
      `;
      box.appendChild(card);
    });
}
</script>

</body>
</html>
